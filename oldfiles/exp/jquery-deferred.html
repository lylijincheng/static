<!doctype html>

<!-- http://api.jquery.com/category/deferred-object/ -->
<!-- http://api.jquery.com/jQuery.Callbacks/ -->

<html lang="en">
<head>
    <meta charset="-8">
    <title>jquery-deferred</title>

    <script src="http://code.jquery.com/jquery-2.0.3.js"></script>
</head>
<body>
    
    <script>


        function task() {

            var dfd = $.Deferred();

            setTimeout(intensive, 3e3);

            function intensive() {
                dfd.resolve('resolved');
                //dfd.reject('rejected');
            }

            return dfd.promise();
        }


        function done() {
            console.log('done!', arguments); 
        }

        function fail() {
            console.log('fail!', arguments);
        }

        function always() {
            console.log('always!', arguments);
        }

        function then_done() {
            console.log('then done!', arguments);
        }

        function then_fail() {
            console.log('then fail!', arguments);
        }

        task()
            .done(done)
            .fail(fail)
            .then(then_done, then_fail)
            .always(always);

    </script>
</body>
</html>